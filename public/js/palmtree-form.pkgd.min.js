!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t:t(jQuery)}(function(t){"use strict";function e(e,s){this.$el=t(e),this.$alert=null,this.options=t.extend({},t.fn[o].defaults,s),this.init()}var o="bsAlert",s={destroy:function(){this.clear(),this.$el.removeData(o)},show:function(){if(t.isFunction(this.options.position))this.options.position.call(this,this.getAlert());else switch(this.options.position){case"after":this.$el.after(this.getAlert());break;default:this.$el.before(this.getAlert())}},clear:function(){for(var t=this.$el.data(o)||[],e=0;e<t.length;e++)t[e].$alert.remove()}},n={init:function(){this.options.clear&&this.clear(),this.show()},getAlert:function(){var e=t("<div />");if(e.attr("role","alert").addClass("alert alert-"+this.options.type).append(" "+this.getContent(this.options.content)),this.options.icons&&this.options.icons[this.options.type]){var o=t("<span />").addClass(this.options.icons[this.options.type]);e.prepend(o)}return this.options.dismissible&&(e.addClass("alert-dismissible"),e.append(t("<button />").attr({type:"button","data-dismiss":"alert","aria-label":"Close",class:"close"}).html('<span aria-hidden="true">&times;</span>'))),this.$alert=e,e},getContent:function(e){var o=this,s="";switch(typeof e){case"function":s=e.call(o);break;case"object":t.each(e,function(t,e){s+=this.getContent(e)});break;default:s=e}return s}};return e.prototype=t.extend({},s,n),t.fn[o]=function(){var n=arguments;return this.each(function(){2===n.length&&"string"==typeof n[0]&&"string"==typeof n[1]&&(n[0]={type:n[0],content:n[1]});var i=t(this).data(o)||[];i.push(new e(this,n[0])),t(this).data(o,i),"string"==typeof n[0]&&t.isFunction(s[n[0]])&&s[n[0]].apply(i[0],Array.prototype.slice.call(n,1))})},t.fn[o].defaults={type:"danger",content:"",clear:!0,dismissible:!1,position:"default",icons:{danger:"fa fa-exclamation-circle",warning:"fa fa-question-circle",info:"fa fa-info-circle",success:"fa fa-check-circle"}},t.fn[o]}),function(t){"use strict";"undefined"!=typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t:t(window.jQuery)}(function(t){"use strict";function e(e,s){this.$form=t(e),this.$submitButton=this.$form.find("[type=submit]").last(),this.options=t.extend({},t.fn[o].defaults,s),this.init(this)}t(function(){t(".palmtree-form.is-ajax").palmtreeForm()});var o="palmtreeForm",s={setFormGroupState:function(e,o){var s=this;e.each(function(){for(var e=t(this).find(".palmtree-form-control"),n=t(this).find(".form-control-feedback"),i=0;i<s.options.controlStates.length;i++)t(this).removeClass("has-"+s.options.controlStates[i]),e.removeClass("form-control-"+s.options.controlStates[i]);o?t.inArray(o,s.options.controlStates)>-1&&(t(this).addClass("has-"+o),e.addClass("form-control-"+o),n.show()):n.hide(),s.$form.trigger(s.getEvent("formGroupStateChange",{$formGroup:t(this),state:o}))})}},n={init:function(){var t=this;t.$form.on("submit.palmtreeForm",function(e){e.preventDefault(),t.onSubmit()})},onSubmit:function(){var e=this,o=this.$form,s=this.$submitButton;o.addClass("is-submitting"),s.addClass("disabled").prop("disabled",!0),o.trigger(this.getEvent("beforeSend"));var n=t.ajax({url:o.attr("action")||e.options.url,type:e.$form.prop("method")||e.options.method,dataType:e.options.dataType,data:o.serialize(),context:e});n.done(e.handleResponse).always(function(){o.removeClass("is-submitting"),s.removeClass("disabled").prop("disabled",!1)}),o.trigger(this.getEvent("promise",{promise:n}))},handleResponse:function(e){var o=this;if(!e||void 0===e.data)return t.error("Invalid response"),!1;var s=o.$form.find(".palmtree-form-control");if(o.setFormGroupState(s.closest(".form-group"),""),e.success)return s.filter(":visible").val(""),e.data.message&&o.showAlert(e.data.message,"success"),o.options.removeSubmitButton&&o.$submitButton.remove(),!0;var n=e.data.errors||null;return o.setControlParentStates(s,n),s.filter(".form-control-danger").first().focus().closest(".form-group").find(".form-control-feedback").hide().fadeIn(),e.data.message&&o.showAlert(e.data.message),!1},setControlParentStates:function(e,o){var s=this;e.each(function(){var e=t(this).data("name"),n=t(this).closest(".form-group"),i=n.find(".form-control-feedback");o&&e&&void 0!==o[e]?(i.length||(i=t("<div />").addClass("form-control-feedback small")),i.html(o[e]),n.append(i),s.setFormGroupState(n,"danger"),t(this).off("input.palmtreeForm change.palmtreeForm").on("input.palmtreeForm change.palmtreeForm",function(){var e=t(this).val().length?"":"danger";s.setFormGroupState(n,e)})):s.setFormGroupState(n,"")})},getEvent:function(e,s){var n=new t.Event(e,s);return n.namespace=o,n.form=this,n},showAlert:function(t,e){var o=this;this.$form.bsAlert({content:t,type:e,position:function(t){o.$submitButton.before(t)}})}};return e.prototype=t.extend({},s,n),t.fn[o]=function(){var n=arguments;return this.each(function(){var i=t(this).data(o);i||(i=new e(this,n[0]),t(this).data(o,i)),"string"==typeof n[0]&&t.isFunction(s[n[0]])&&i[n[0]].apply(i,Array.prototype.slice.call(n,1))})},t.fn[o].defaults={url:"",method:"GET",dataType:"json",removeSubmitButton:!0,controlStates:["danger","success","warning"]},t.fn[o]});