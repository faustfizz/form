!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t:t(jQuery)}(function(t){"use strict";function e(e,n){this.$el=t(e),this.$alert=null,this.options=t.extend({},t.fn[i].defaults,n),this.init()}var i="bsAlert",n={destroy:function(){this.clear(),this.$el.removeData(i)},show:function(){if(t.isFunction(this.options.position))this.options.position.call(this,this.getAlert());else switch(this.options.position){case"after":this.$el.after(this.getAlert());break;default:this.$el.before(this.getAlert())}},clear:function(){for(var t=this.$el.data(i)||[],e=0;e<t.length;e++)t[e].$alert.remove()}},o={init:function(){this.options.clear&&this.clear(),this.show()},getAlert:function(){var e=t("<div />");if(e.attr("role","alert").addClass("alert alert-"+this.options.type).append(" "+this.getContent(this.options.content)),this.options.icons&&this.options.icons[this.options.type]){var i=t("<span />").addClass(this.options.icons[this.options.type]);e.prepend(i)}return this.options.dismissible&&(e.addClass("alert-dismissible"),e.append(t("<button />").attr({type:"button","data-dismiss":"alert","aria-label":"Close",class:"close"}).html('<span aria-hidden="true">&times;</span>'))),this.$alert=e,e},getContent:function(e){var i=this,n="";switch(typeof e){case"function":n=e.call(i);break;case"object":t.each(e,function(t,e){n+=this.getContent(e)});break;default:n=e}return n}};return e.prototype=t.extend({},n,o),t.fn[i]=function(){var o=arguments;return this.each(function(){2===o.length&&"string"==typeof o[0]&&"string"==typeof o[1]&&(o[0]={type:o[0],content:o[1]});var s=t(this).data(i)||[];s.push(new e(this,o[0])),t(this).data(i,s),"string"==typeof o[0]&&t.isFunction(n[o[0]])&&n[o[0]].apply(s[0],Array.prototype.slice.call(o,1))})},t.fn[i].defaults={type:"danger",content:"",clear:!0,dismissible:!1,position:"default",icons:{danger:"fa fa-exclamation-circle",warning:"fa fa-question-circle",info:"fa fa-info-circle",success:"fa fa-check-circle"}},t.fn[i]}),function(t){"use strict";"undefined"!=typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t:t(window.jQuery)}(function(t){"use strict";function e(e,n,o){this.$el=t(e),this.$form=t(n),this.options=t.extend({},t.fn[i].defaults,o),this.init()}t(function(){t(".palmtree-form").each(function(){var e=t(this).find(".g-recaptcha");e&&t.isFunction(t.fn.palmtreeRecaptcha)&&e.palmtreeRecaptcha(this)})});var i="palmtreeRecaptcha",n={},o={init:function(){var e=this;window[this.$el.data("onload")]=function(){var i=window.grecaptcha.render(e.$el.attr("id"),{sitekey:e.$el.data("site_key"),callback:function(i){var n=t("#"+e.$el.data("form_control"));n.val(i),e.$form.palmtreeForm("clearState",n)}});e.$form.on("error.palmtreeForm success.palmtreeForm",function(){window.grecaptcha.reset(i)})},t.getScript(this.$el.data("script_url"))}};return e.prototype=t.extend({},n,o),t.fn[i]=function(){var o=arguments;return this.each(function(){var s=t(this).data(i);s||(s=new e(this,o[0]),t(this).data(i,s)),"string"==typeof o[0]&&t.isFunction(n[o[0]])&&s[o[0]].apply(s,Array.prototype.slice.call(o,1))})},t.fn[i].defaults={},t.fn[i]}),function(t){"object"==typeof module&&module.exports?module.exports=t:"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){"use strict";function e(e,n){this.$collection=t(e),this.options=t.extend(!0,{},t.fn[i].defaults,n),this.init()}var i="palmtreeFormCollection";e.prototype={init:function(){var e=this;if(this.$collection.data("index",this.$collection.find(this.options.entrySelector).length),console.log(this.$collection),this.$collection.find(this.options.entrySelector).each(function(){console.log(t(this)),e.addRemoveLink(t(this))}),this.$collection.on("click",".remove-entry-link",function(i){i.preventDefault(),i.stopPropagation(),e.removeEntry(t(this).closest(".palmtree-form-collection-entry").parent())}),this.$addEntryLink=t('<button type="button" class="add-entry-link btn btn-primary">'+this.options.labels.add+"</button>"),this.$collection.after(this.$addEntryLink),this.$addEntryLink.on("click",function(t){t.preventDefault(),e.addEntry()}),"number"==typeof this.options.minEntries)for(var i=0;i<=this.options.minEntries;i++)e.addEntry();this.hasMaxEntries()&&this.$addEntryLink.addClass("disabled")},addEntry:function(){if(this.hasMaxEntries())return!1;var e,i=this.$collection.data("index");e=this.options.prototype?this.options.prototype:(e=this.$collection.data("prototype")).replace(/__name__label__/g,i).replace(/__name__/g,i);var n=t(e);n.data("index",this.$collection.data("index")),this.addRemoveLink(n),this.$collection.append(n),this.$collection.data("index",i+1),this.$collection.trigger("addedEntry.palmtreeFormCollection",[n,this]),this.hasMaxEntries()&&this.$addEntryLink.addClass("disabled")},removeEntry:function(t){if("number"==typeof this.options.minEntries&&this.options.minEntries===this.getTotalEntries())return!1;this.$collection.triggerHandler("removeEntry.palmtreeFormCollection",[t,this]);var e=this;promise.then(function(i){i&&(t.remove(),e.$collection.triggerHandler("removedEntry.palmtreeFormCollection",[e]),e.hasMaxEntries()||e.$addEntryLink.removeClass("disabled"))})},addRemoveLink:function(t){t.append('<button type="button" class="remove-entry-link btn btn-sm btn-danger">'+this.options.labels.remove+"</button>")},getTotalEntries:function(){return this.$collection.find(this.options.entrySelector).length},hasMaxEntries:function(){return"number"==typeof this.options.maxEntries&&this.options.maxEntries===this.getTotalEntries()}},t.fn[i]=function(n){var o=arguments;return this.each(function(){var n=t(this).data(i);n||(n=new e(this,o[0]),t(this).data(i,n)),"string"==typeof o[0]&&n[o[0]].apply(n,Array.prototype.slice.call(o,1))})},t.fn[i].defaults={entrySelector:"> div > .palmtree-form-collection-entry",prototype:null,labels:{add:"Add Entry",remove:"Remove"},minEntries:null,maxEntries:null,removalPromise:!1,confirmRemove:!1}}),function(t){"use strict";"undefined"!=typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t:t(window.jQuery)}(function(t){"use strict";function e(e,n){this.$form=t(e),this.$submitButton=this.$form.find("[type=submit]").last(),this.options=t.extend({},t.fn[i].defaults,n),this.init()}t(function(){t(".palmtree-form").each(function(){t(this).hasClass("is-ajax")&&t(this).palmtreeForm()})});var i="palmtreeForm",n={clearState:function(t){this.setState(t,"")},setState:function(e,i){var n=this;e.each(function(){for(var e=t(this),o=t(this).closest(".form-group").find(".invalid-feedback"),s=0;s<n.options.controlStates.length;s++)e.removeClass("is-"+n.options.controlStates[s]);i?t.inArray(i,n.options.controlStates)>-1&&(e.addClass("is-"+i),o.show()):o.hide(),n.$form.trigger(n.getEvent("statechange",{$formControl:e,state:i}))})}},o={init:function(){var t=this;this.$form.on("submit.palmtreeForm",function(e){e.preventDefault(),t.onSubmit()})},onSubmit:function(){var e=this,i=this.$form,n=this.$submitButton;i.addClass("is-submitting"),n.addClass("disabled").prop("disabled",!0),i.trigger(this.getEvent("beforeSend"));var o=t.ajax({url:i.attr("action")||e.options.url,type:e.$form.prop("method")||e.options.method,dataType:e.options.dataType,data:i.serialize(),context:e});o.done(e.handleResponse).always(function(){i.removeClass("is-submitting"),n.removeClass("disabled").prop("disabled",!1)}),i.trigger(this.getEvent("promise",{promise:o}))},handleResponse:function(e){var i=this;if(!e||void 0===e.data)return t.error("Invalid response"),!1;var n=i.$form.find(".palmtree-form-control");if(i.clearState(n),!e.success){var o=e.data.errors||null;return i.setControlStates(n,o),n.filter(".is-invalid").first().focus().closest(".form-group").find(".invalid-feedback").hide().fadeIn(),e.data.message&&i.showAlert(e.data.message),i.$form.trigger(this.getEvent("error",{responseData:e.data})),!1}return n.filter(":visible").val(""),e.data.message&&i.showAlert(e.data.message,"success"),i.options.removeSubmitButton&&i.$submitButton.remove(),i.$form.trigger(this.getEvent("success",{responseData:e.data})),!0},setControlStates:function(e,i){var n=this;e.each(function(){var e=t(this),o=e.data("name"),s=e.closest(".form-group"),a=s.find(".invalid-feedback");i&&o&&void 0!==i[o]?(a.length||(a=t("<div />").addClass("invalid-feedback small")),a.html(i[o]),s.append(a),n.setState(e,"invalid"),t(this).off("input.palmtreeForm change.palmtreeForm").on("input.palmtreeForm change.palmtreeForm",function(){var i=t(this).val().length?"":"invalid";n.setState(e,i)})):n.clearState(e)})},getEvent:function(e,n){var o=new t.Event(e,n);return o.namespace=i,o.form=this,o},showAlert:function(t,e){var i=this;this.$form.bsAlert({content:t,type:e,position:function(t){i.$submitButton.before(t)}})}};return e.prototype=t.extend({},n,o),t.fn[i]=function(){var o=arguments;return this.each(function(){var s=t(this).data(i);s||(s=new e(this,o[0]),t(this).data(i,s)),"string"==typeof o[0]&&t.isFunction(n[o[0]])&&s[o[0]].apply(s,Array.prototype.slice.call(o,1))})},t.fn[i].defaults={url:"",method:"GET",dataType:"json",removeSubmitButton:!0,controlStates:["valid","invalid"]},t.fn[i]});