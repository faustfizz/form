!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t:t(jQuery)}(function(t){"use strict";function e(e,n){this.$el=t(e),this.$alert=null,this.options=t.extend({},t.fn[i].defaults,n),this.init()}var i="bsAlert",n={destroy:function(){this.clear(),this.$el.removeData(i)},show:function(){if(t.isFunction(this.options.position))this.options.position.call(this,this.getAlert());else switch(this.options.position){case"after":this.$el.after(this.getAlert());break;default:this.$el.before(this.getAlert())}},clear:function(){for(var t=this.$el.data(i)||[],e=0;e<t.length;e++)t[e].$alert.remove()}},s={init:function(){this.options.clear&&this.clear(),this.show()},getAlert:function(){var e=t("<div />");if(e.attr("role","alert").addClass("alert alert-"+this.options.type).append(" "+this.getContent(this.options.content)),this.options.icons&&this.options.icons[this.options.type]){var i=t("<span />").addClass(this.options.icons[this.options.type]);e.prepend(i)}return this.options.dismissible&&(e.addClass("alert-dismissible"),e.append(t("<button />").attr({type:"button","data-dismiss":"alert","aria-label":"Close",class:"close"}).html('<span aria-hidden="true">&times;</span>'))),this.$alert=e,e},getContent:function(e){var i=this,n="";switch(typeof e){case"function":n=e.call(i);break;case"object":t.each(e,function(t,e){n+=this.getContent(e)});break;default:n=e}return n}};return e.prototype=t.extend({},n,s),t.fn[i]=function(){var s=arguments;return this.each(function(){2===s.length&&"string"==typeof s[0]&&"string"==typeof s[1]&&(s[0]={type:s[0],content:s[1]});var o=t(this).data(i)||[];o.push(new e(this,s[0])),t(this).data(i,o),"string"==typeof s[0]&&t.isFunction(n[s[0]])&&n[s[0]].apply(o[0],Array.prototype.slice.call(s,1))})},t.fn[i].defaults={type:"danger",content:"",clear:!0,dismissible:!1,position:"default",icons:{danger:"fa fa-exclamation-circle",warning:"fa fa-question-circle",info:"fa fa-info-circle",success:"fa fa-check-circle"}},t.fn[i]}),function(t){"use strict";"undefined"!=typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t:t(window.jQuery)}(function(t){"use strict";function e(e,n,s){this.$el=t(e),this.$form=t(n),this.options=t.extend({},t.fn[i].defaults,s),this.init()}t(function(){t(".palmtree-form").each(function(){var e=t(this).find(".g-recaptcha");e&&t.isFunction(t.fn.palmtreeRecaptcha)&&e.palmtreeRecaptcha(this)})});var i="palmtreeRecaptcha",n={},s={init:function(){var e=this;window[this.$el.data("onload")]=function(){var i=window.grecaptcha.render(e.$el.attr("id"),{sitekey:e.$el.data("site_key"),callback:function(i){var n=t("#"+e.$el.data("form_control"));n.val(i),e.$form.palmtreeForm("clearState",n)}});e.$form.on("error.palmtreeForm success.palmtreeForm",function(){window.grecaptcha.reset(i)})},t.getScript(this.$el.data("script_url"))}};return e.prototype=t.extend({},n,s),t.fn[i]=function(){var s=arguments;return this.each(function(){var o=t(this).data(i);o||(o=new e(this,s[0]),t(this).data(i,o)),"string"==typeof s[0]&&t.isFunction(n[s[0]])&&o[s[0]].apply(o,Array.prototype.slice.call(s,1))})},t.fn[i].defaults={},t.fn[i]}),function(t){"use strict";"undefined"!=typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t:t(window.jQuery)}(function(t){"use strict";function e(e,n){this.$form=t(e),this.$submitButton=this.$form.find("[type=submit]").last(),this.options=t.extend({},t.fn[i].defaults,n),this.init()}t(function(){t(".palmtree-form").each(function(){t(this).hasClass("is-ajax")&&t(this).palmtreeForm()})});var i="palmtreeForm",n={clearState:function(t){this.setState(t,"")},setState:function(e,i){var n=this;e.each(function(){for(var e=t(this),s=t(this).closest(".form-group").find(".invalid-feedback"),o=0;o<n.options.controlStates.length;o++)e.removeClass("is-"+n.options.controlStates[o]);i?t.inArray(i,n.options.controlStates)>-1&&(e.addClass("is-"+i),s.show()):s.hide(),n.$form.trigger(n.getEvent("statechange",{$formControl:e,state:i}))})}},s={init:function(){var t=this;this.$form.on("submit.palmtreeForm",function(e){e.preventDefault(),t.onSubmit()})},onSubmit:function(){var e=this,i=this.$form,n=this.$submitButton;i.addClass("is-submitting"),n.addClass("disabled").prop("disabled",!0),i.trigger(this.getEvent("beforeSend"));var s=t.ajax({url:i.attr("action")||e.options.url,type:e.$form.prop("method")||e.options.method,dataType:e.options.dataType,data:i.serialize(),context:e});s.done(e.handleResponse).always(function(){i.removeClass("is-submitting"),n.removeClass("disabled").prop("disabled",!1)}),i.trigger(this.getEvent("promise",{promise:s}))},handleResponse:function(e){var i=this;if(!e||void 0===e.data)return t.error("Invalid response"),!1;var n=i.$form.find(".palmtree-form-control");if(i.clearState(n),!e.success){var s=e.data.errors||null;return i.setControlStates(n,s),n.filter(".is-invalid").first().focus().closest(".form-group").find(".invalid-feedback").hide().fadeIn(),e.data.message&&i.showAlert(e.data.message),i.$form.trigger(this.getEvent("error",{responseData:e.data})),!1}return n.filter(":visible").val(""),e.data.message&&i.showAlert(e.data.message,"success"),i.options.removeSubmitButton&&i.$submitButton.remove(),i.$form.trigger(this.getEvent("success",{responseData:e.data})),!0},setControlStates:function(e,i){var n=this;e.each(function(){var e=t(this),s=e.data("name"),o=e.closest(".form-group"),a=o.find(".invalid-feedback");i&&s&&void 0!==i[s]?(a.length||(a=t("<div />").addClass("invalid-feedback small")),a.html(i[s]),o.append(a),n.setState(e,"invalid"),t(this).off("input.palmtreeForm change.palmtreeForm").on("input.palmtreeForm change.palmtreeForm",function(){var i=t(this).val().length?"":"invalid";n.setState(e,i)})):n.clearState(e)})},getEvent:function(e,n){var s=new t.Event(e,n);return s.namespace=i,s.form=this,s},showAlert:function(t,e){var i=this;this.$form.bsAlert({content:t,type:e,position:function(t){i.$submitButton.before(t)}})}};return e.prototype=t.extend({},n,s),t.fn[i]=function(){var s=arguments;return this.each(function(){var o=t(this).data(i);o||(o=new e(this,s[0]),t(this).data(i,o)),"string"==typeof s[0]&&t.isFunction(n[s[0]])&&o[s[0]].apply(o,Array.prototype.slice.call(s,1))})},t.fn[i].defaults={url:"",method:"GET",dataType:"json",removeSubmitButton:!0,controlStates:["valid","invalid"]},t.fn[i]});