!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t:t(jQuery)}(function(n){"use strict";var i=[],o="bsAlert",s={destroy:function(){this.clear()},show:function(){if(n.isFunction(this.options.position))this.options.position.call(this,this.getAlert());else switch(this.options.position){case"after":this.$el.after(this.getAlert());break;default:this.$el.before(this.getAlert())}},clear:function(){for(var t=0;t<i.length;t++)i[t].$alert.remove()}},t={init:function(){this.options.clear&&this.clear(),this.show()},getAlert:function(){var t=n("<div />");if(t.attr("role","alert").addClass("alert alert-"+this.options.type).append(document.createTextNode(this.getContent(this.options.content))),this.options.icons&&this.options.icons[this.options.type]){var e=n("<span />").addClass(this.options.icons[this.options.type]);t.prepend(e)}return this.options.dismissible&&(t.addClass("alert-dismissible"),t.append(n("<button />").attr({type:"button","data-dismiss":"alert","aria-label":"Close",class:"close"}).html('<span aria-hidden="true">&times;</span>'))),this.$alert=t},getContent:function(t){var i="";switch(typeof t){case"function":i=t.call(this);break;case"object":n.each(t,function(t,e){i+=this.getContent(e)});break;default:i=t}return i}};function r(t,e){this.$el=n(t),this.$alert=null,this.options=n.extend({},n.fn[o].defaults,e),this.init()}return r.prototype=n.extend({},s,t),n.fn[o]=function(){var e=arguments;return this.each(function(t){2===e.length&&"string"==typeof e[0]&&"string"==typeof e[1]&&(e[0]={type:e[0],content:e[1]}),i[t]&&"string"==typeof e[0]&&n.isFunction(s[e[0]])?s[e[0]].apply(i[t],Array.prototype.slice.call(e,1)):i[t]=new r(this,e[0])})},n.fn[o].defaults={type:"danger",content:"",clear:!0,dismissible:!1,position:"default",icons:{danger:"fa fa-exclamation-circle",warning:"fa fa-question-circle",info:"fa fa-info-circle",success:"fa fa-check-circle"}},n.fn[o]}),function(t){"use strict";"undefined"!=typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t:t(window.jQuery)}(function(t){"use strict";t(function(){t(".palmtree-form").on("change",".custom-file-input",function(){t(this).next(".custom-file-label").html(this.files[0].name)})})}),function(t){"use strict";"undefined"!=typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t:t(window.jQuery)}(function(n){"use strict";n(function(){n(".palmtree-form").each(function(){var t=n(this).find(".g-recaptcha");t&&n.isFunction(n.fn.palmtreeRecaptcha)&&t.palmtreeRecaptcha(this)})});var o="palmtreeRecaptcha";function i(t,e,i){this.$el=n(t),this.$form=n(e),this.options=n.extend({},n.fn[o].defaults,i),this.init()}var s={},t={init:function(){var i=this;window[this.$el.data("onload")]=function(){var t=window.grecaptcha.render(i.$el.attr("id"),{sitekey:i.$el.data("site_key"),callback:function(t){var e=n("#"+i.$el.data("form_control"));e.val(t),i.$form.palmtreeForm("isInitialized")&&i.$form.palmtreeForm("clearState",e)}});i.$form.on("error.palmtreeForm success.palmtreeForm",function(){window.grecaptcha.reset(t)})},n.getScript(this.$el.data("script_url"))}};return i.prototype=n.extend({},s,t),n.fn[o]=function(){var e=arguments;return this.each(function(){var t=n(this).data(o);t||(t=new i(this,e[0]),n(this).data(o,t)),"string"==typeof e[0]&&n.isFunction(s[e[0]])&&t[e[0]].apply(t,Array.prototype.slice.call(e,1))})},n.fn[o].defaults={},n.fn[o]}),function(t){"object"==typeof module&&module.exports?module.exports=t:"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(n){"use strict";var i="palmtreeFormCollection";function o(t,e){this.$collection=n(t),this.options=n.extend(!0,{},n.fn[i].defaults,e),this.init()}o.prototype={init:function(){var e=this;if(this.$collection.data("index",this.$collection.find(this.options.entrySelector).length),this.$collection.find(this.options.entrySelector).each(function(){e.addRemoveLink(n(this))}),this.$collection.on("click",".remove-entry-link",function(t){t.preventDefault(),t.stopPropagation(),e.removeEntry(n(this).closest(".palmtree-form-collection-entry"))}),this.$addEntryLink=n('<button type="button" class="add-entry-link btn btn-primary">'+this.options.labels.add+"</button>"),this.$collection.after(this.$addEntryLink),this.$addEntryLink.on("click",function(t){t.preventDefault(),e.addEntry()}),"number"==typeof this.options.minEntries)for(var t=0;t<=this.options.minEntries;t++)e.addEntry();this.hasMaxEntries()&&this.$addEntryLink.addClass("disabled")},addEntry:function(){if(this.hasMaxEntries())return!1;var t,e=this.$collection.data("index");t=this.options.prototype?this.options.prototype:(t=this.$collection.data("prototype")).replace(/__name__label__/g,e).replace(/__name__/g,e);var i=n(t);i.data("index",this.$collection.data("index")),this.addRemoveLink(i),this.$collection.append(i),this.$collection.data("index",e+1),this.$collection.trigger("addedEntry.palmtreeFormCollection",[i,this]),this.hasMaxEntries()&&this.$addEntryLink.addClass("disabled")},removeEntry:function(t){if("number"==typeof this.options.minEntries&&this.options.minEntries===this.getTotalEntries())return!1;this.$collection.triggerHandler("removeEntry.palmtreeFormCollection",[t,this]),t.remove(),this.$collection.triggerHandler("removedEntry.palmtreeFormCollection",[this]),this.hasMaxEntries()||this.$addEntryLink.removeClass("disabled")},addRemoveLink:function(t){t.append('<button type="button" class="remove-entry-link btn btn-sm btn-danger">'+this.options.labels.remove+"</button>")},getTotalEntries:function(){return this.$collection.find(this.options.entrySelector).length},hasMaxEntries:function(){return"number"==typeof this.options.maxEntries&&this.options.maxEntries===this.getTotalEntries()}},n.fn[i]=function(t){var e=arguments;return this.each(function(){var t=n(this).data(i);t||(t=new o(this,e[0]),n(this).data(i,t)),"string"==typeof e[0]&&t[e[0]].apply(t,Array.prototype.slice.call(e,1))})},n.fn[i].defaults={entrySelector:"> div > .palmtree-form-collection-entry",prototype:null,labels:{add:"Add Entry",remove:"Remove"},minEntries:null,maxEntries:null}}),function(t){"use strict";"undefined"!=typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(jQuery)}(function(r){"use strict";r(function(){r(".palmtree-form").each(function(){r(this).hasClass("is-ajax")&&r(this).palmtreeForm()})});var n="palmtreeForm";function i(t,e){this.$form=r(t),this.$submitButton=this.$form.find("[type=submit]").last(),this.options=r.extend({},r.fn[n].defaults,e),this.init()}var o={clearState:function(t){this.setState(t,"")},setState:function(t,n){var o=this;t.each(function(){for(var t=r(this),e=r(this).closest(".form-group").find(".palmtree-invalid-feedback"),i=0;i<o.options.controlStates.length;i++)t.removeClass("is-"+o.options.controlStates[i]);n?-1<r.inArray(n,o.options.controlStates)&&(t.addClass("is-"+n),e.show()):e.hide(),o.$form.trigger(o.getEvent("statechange"),{$formControl:t,state:n})})}},t={init:function(){var e=this;this.$form.on("submit.palmtreeForm",function(t){t.preventDefault(),e.onSubmit()})},onSubmit:function(){var t=this,e=this.$form,i=this.$submitButton;e.addClass("is-submitting"),i.addClass("disabled").prop("disabled",!0),e.trigger(this.getEvent("beforeSend"));var n=r.ajax({url:e.attr("action")||t.options.url,type:t.$form.prop("method")||t.options.method,dataType:t.options.dataType,data:e.serialize(),context:t});n.done(t.handleResponse).always(function(){e.removeClass("is-submitting"),i.removeClass("disabled").prop("disabled",!1)}),e.trigger(this.getEvent("promise"),{promise:n})},handleResponse:function(t){var e=this;if(!t||void 0===t.data)throw new Error("Invalid response");var i=e.$form.find(".palmtree-form-control");if(e.clearState(i),t.success)return i.filter(":visible").val(""),t.data.message&&e.showAlert(t.data.message,"success"),e.options.removeSubmitButton&&e.$submitButton.remove(),e.$form.trigger(this.getEvent("success"),{responseData:t.data}),!0;var n=t.data.errors||null;return e.setControlStates(i,n),i.filter(".is-invalid").first().trigger("focus"),t.data.message&&e.showAlert(t.data.message,"danger"),e.$form.trigger(this.getEvent("error"),{responseData:t.data}),!1},setControlStates:function(t,o){var s=this;t.each(function(){var e=r(this),t=e.data("name"),i=e.closest(".form-group"),n=i.find(".palmtree-invalid-feedback");o&&t&&void 0!==o[t]?(n.length||(n=r(s.$form.data("invalid_element"))),n.html(o[t]),i.append(n),s.setState(e,"invalid"),r(this).off("input.palmtreeForm change.palmtreeForm").on("input.palmtreeForm change.palmtreeForm",function(){var t=r(this).val().length?"":"invalid";s.setState(e,t)})):s.clearState(e)})},getEvent:function(t,e){var i=new r.Event(t,e);return i.namespace=n,i.form=this,i},showAlert:function(t,e){var i=this;this.$form.bsAlert({content:t,type:e,position:function(t){i.$submitButton.before(t)}})}};return i.prototype=r.extend({},o,t),r.fn[n]=function(){var e=arguments;return"isInitialized"===e[0]?!!r(this).data(n):this.each(function(){var t=r(this).data(n);t||(t=new i(this,e[0]),r(this).data(n,t)),"string"==typeof e[0]&&r.isFunction(o[e[0]])&&t[e[0]].apply(t,Array.prototype.slice.call(e,1))})},r.fn[n].defaults={url:"",method:"GET",dataType:"json",removeSubmitButton:!0,controlStates:["valid","invalid"]},r.fn[n]});